# 第７回：実験準備
2025/Sep./28  
文責：堀江和正

---

実際に実験を始めるために，
- 実験を実行するワークステーションサーバーへのアクセスを確立する
- VsCodeを用いてワークステーションサーバーにアクセスする
- Githubに新しいリポジトリを立てる
- ワークステーションサーバーに，Githubから実験用のリポジトリをCloneする，add, commit, pushする
- VsCodeターミナル上から実験を実行する

の５点を行います．

---

## ワークステーションサーバーへのアクセスを確立する

ワークステーションサーバーは，CCSの中にあるLocal Area Networkの中にあります．
ゲートウェイからSSHトンネルを通じてアクセス可能です．
具体的なIPアドレスや，認証方法についてはインターネット上に公開したくないので，直接説明します．

具体的な作業は直接教員から指示します．

## VsCodeを用いてワークステーションサーバーにアクセスする

### 0) VsCode をインストール

### 1) Remote - SSH をインストール
VS Code の拡張機能から Remote - SSH をインストール。

### 2) VS Code で Remote-SSH: Open SSH Configuration File... を実行し、あなたのホームの ~/.ssh/config を開いて以下を追加します。
（直接エディタで ~/.ssh/config を編集してもOK）

[このフォルダのexample_ssh_config.txtを確認してね](https://github.com/KDE-Sleep/research-starter-kit/blob/main/example-ssh-config.txt)

**ポイント**
Host名はworkstationを定義しています．VS Code の接続先一覧に workstation が出ます。
既に ~/.ssh/config に似た設定がある場合は重複や競合にご注意ください。

### 3) VS Code で接続

コマンドパレット（Ctrl/Cmd + Shift + P） → Remote-SSH: Connect to Host...  
一覧から workstation を選択  
初回はホスト鍵のフィンガープリント確認ダイアログが出ます。サーバー管理者から提供されたフィンガープリントと必ず照合してから承認してください。

---

## Githubに新しいリポジトリを立てる

Github Organizationから新しいリポジトリを作成してください．  
テンプレートとして「Information-System-Experiment-Templete」リポジトリを選択してください．

## ワークステーションサーバーに，Githubから実験用のリポジトリをCloneする，add, commit, pushする

### Cloneのやり方

VS Codeでワークステーションサーバーにアクセスした後，ホームディレクトリにあるhogehoge.shを実行してください．  
Githubとのコネクションが自動的に確立されます．  

その後，
'''bash
git clone git@github.com:KDE-Sleep/<あなたのリポジトリ名>.git
'''
を実行すると，Github上のファイルがワークステーション内にコピーされます．

### add, commit, pushのやり方

プログラムの修正をした後は，Github上に変更を記録してください．
具体的には，該当のディレクトリの中で，
'''bash
git add --all
git commit -m "修正内容の説明"
git push
'''
と入力すると，ワークステーションサーバー内のコードがGithub上にコピーされます．

## VsCodeターミナル上から実験を実行する

VsCodeのターミナルを起動し，
1. setup.shを実行する（Docker設定を自動的に行います．）
2. run.shを実行する（Nvidia Dockerが起動します）
3. python hogehoge.py（pythonコードを実行します）
4. "hello world"が表示されたらOKです．

> [!Note]
> "pyedflib"が読み込めない，と言われた場合，run.shが実行されていません．

今後の実験に際しては，リポジトリ内のexperiments-hogehoge.pyを修正，実行することで進めてください．

実験の流れとしては
1. run.shを実行
2. experiment-hogehoge.pyを修正，実行，実験結果を確認する．
3. githubにpush

**レポートの提出は，リポジトリ内のlab-noteディレクトリに保存することで行ってください．**  
**メール等ではレポートを受け取りませんので注意してください．**
